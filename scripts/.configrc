# .configrc: invoked by bash(1)
#
# Initialize variables.
set -e
SCR="$(cd -P -- "$(dirname -- "$0")" && pwd -P)"
export ROOT="$(cd "$SCR" && git rev-parse --show-toplevel 2> /dev/null)"

# Determine platform paths.
OUT="/opt"
CONF="mt4-tester.ini"
CONF2="terminal.ini"
TPL="$ROOT/conf/$CONF"
TPL2="$ROOT/conf/$CONF2"
TERMINAL_EXE="$(find ~ "$OUT" -name terminal.exe -print -quit)"
TERMINAL_DIR="$(dirname "$TERMINAL_EXE")"
TERMINAL_INI="$TERMINAL_DIR/config/$CONF"
TERMINAL_INI2="$TERMINAL_DIR/config/$CONF2"

# Configure wine.
DISPLAY=:0.0 # Select screen 0.
WINEDLLOVERRIDES="mscoree,mshtml=" # Disable gecko in wine.
WINEDEBUG="warn-all,fixme-all" # For debugging, try: WINEDEBUG=trace+all

# Define functions.
show_logs() {
  echo "Printing logs..."
  find "$TERMINAL_DIR" '(' -name "*.log" -o -name "*.txt" ')' -exec tail "{}" ';'
}

clean_files() {
  # Remove old log, dat, txt and htm files.
  echo "Cleaning..."
  find "$TERMINAL_DIR" '(' -name "*.log"  -o -name "*.txt" -o -name "*.dat" -o -name "*.htm" ')' -print -delete
}
